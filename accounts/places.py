import numpy, math

Places = {
"Comunitiy Center": 
[(106.8008121, 10.876359),
(106.8015774, 10.87648368),
(106.8013557, 10.87386369),
(106.7999967, 10.87443265),
(106.7997964, 10.87533173),
(106.800669, 10.87586556)],

"UIT": 
[(106.8037464, 10.87106456),
(106.8051841, 10.87015844),
(106.8040039, 10.86891515),
(106.80321, 10.86832511),
(106.8023946, 10.86944197)],

"USSH": 
[(106.801, 10.8735),
(106.803, 10.873),
(106.803, 10.872),
(106.802, 10.871),
(106.801, 10.87),
(106.8, 10.87),
(106.799, 10.872),
(106.8017437, 10.87067033)],

"Peoole's Security University": 
[(106.8055488, 10.87458366),
(106.8076946, 10.87334039),
(106.806096, 10.87130689),
(106.8039717, 10.87222355)],

"Central Lib": 
[(106.795242, 10.8705237),
(106.7975809, 10.8704078),
(106.7975487, 10.86687811),
(106.7962398, 10.86645665),
(106.7944481, 10.86674114)],

"IU": 
[(106.7995,  10.878753),
(106.802453, 10.878585),
(106.803168, 10.876547),
(106.800665, 10.876631),
(106.799507, 10.878753)],

"HCMUT": 
[(106.804863, 10.881935),
(106.807428, 10.88053),
(106.805438, 10.877476),
(106.802919, 10.879156),
(106.804863, 10.881935)],

"Dormitory Zone A": 
[(106.8053619, 10.8770891),
(106.8070535, 10.87527689),
(106.8109016, 10.88095231),
(106.8088274, 10.88224471),
(106.8089561, 10.87790389)],

"UEL": 
[(106.7767525, 10.87240187),
(106.7800712, 10.86914264)],

"NLU": 
[(106.7859499, 10.8716419),
(106.7857282, 10.86779262),
(106.7914359, 10.86761701),
(106.791536, 106.791536),
(106.7880885, 10.87171916)],

"Dormitory Zone B": 
[(106.7782359, 10.88403933),
(106.7793374, 10.88653982),
(106.7814545, 10.88648363),
(106.7841725, 10.88322455),
(106.7829995, 10.88166524)],

"Dormitory Zone B": 
[(106.7871766, 10.88196025),
(106.7855458, 10.87691701),
(106.7915539, 10.87594769),
(106.7952446, 10.87777395),
(106.7932848, 10.88009187),
(106.7897443, 10.87996544),
(106.7991285, 10.88250811),
(106.7974119, 10.88683482),
(106.7916183, 10.88534577),
(106.8048791, 10.88791649),
(106.8022184, 10.88956006),
(106.7992715, 10.88743887)],


"NLU Bus Stop": [(106.7877595, 10.86808764)],

"VNU Bus Stop": [(106.80185, 10.87421625)],

"Nghia Trang Lich Si TP.HCM": [(106.810215, 10.87402309)],

"Suoi Tien Theme Park": [(106.8029766, 10.86608572)],

"Nha Khach DHQG": [(106.7868805, 10.8791169)],

"VNU Homestay": [(106.7951417, 10.87982984)],

"Nghia Trang Lich Si TP.HCM": [(106.8006885, 10.88326806)],

"High School For the Gifted": [(106.7990184, 10.87760322)],

"Cell Lab": [(106.7967939, 10.87813705)]
}


def calculate_distance(a, b):
    delta_x = b[0] - a[0]
    delta_y = b[1] - a[1]

    dist = math.sqrt(delta_x**2 + delta_y**2)

    return dist

def locate(current_pos):
    global Places
    position = "UIT"
    min_distance = calculate_distance(current_pos, Places["UIT"][0])
    key_list = list(Places.keys())
    val_list = list(Places.values())
    index = -1

    my_dist = []

    for i in range(len(val_list)):
        place = val_list[i]
        if len(place) > 1:
            for item in place:
                temp = calculate_distance(current_pos, item)
                if min_distance > temp:
                    min_distance = temp
                    index = i
        else:
            temp = calculate_distance(current_pos, place[0])
            if min_distance > temp:
                min_distance = temp
                index = i
        
        # print("\n", key_list[i])
        # print("Distance: ", temp)
        # print("Index: ", index)
    
    position = key_list[index]

    return position

# print ("My location: ", locate((106.7951417, 10.87982984)))
